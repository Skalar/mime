- unless @article.new_record?
  = render :partial => 'info', :locals => { :article => @article }
= render :partial => "common/flash"

= semantic_form_for setup_article(@article) do |f|
  = f.inputs do
    = f.input :headword, :label => false, :input_html => {:class => 'headword', :'data-tooltip-enable' => true, :title => t('tooltips.articles.headword')}
    = f.input :text, :as => :ckeditor, :label => false, :input_html => { :cols => '80', :class => 'articletext' }
    = f.input :tags
    = f.semantic_fields_for :location, :builder => Maptastic::SemanticFormBuilder do |location_f|
      = location_f.multi_input :latitude, :longitude, :as => :map, :label => :location,
        :zoom => :zoom, :search => true, :search_label => t('formtastic.labels.other.maptastic-search'),
        :hint => t('formtastic.labels.other.maptastic-hint')
      
    = f.input :headword_presentation, :input_html => { :'data-tooltip-enable' => true, :title => t('tooltips.articles.headword_presentation')}
    = f.input :disambiguation, :as => :text, :input_html => { :rows => 4 }
  = f.inputs :name => t('articles.external_links'), :id => 'external-links' do
    = f.semantic_fields_for :external_links do |external_links_f|
      %li
        %ol.link
          = external_links_f.input :href
          = external_links_f.input :text, :wrapper_html => {:class => 'link-text'}
          - unless external_links_f.object.new_record?
            = external_links_f.input :_destroy, :as => :boolean
          - else # There should only be one object getting in here, the one we built in #setup_company helper
            %li
              %button.add{:type => 'button', :value => 'add-link'}= image_tag('icons/add.png', :size => '16x16')
              %button.remove{:type => 'button', :value => 'remove-link'}= image_tag('icons/delete.png', :size => '16x16')
            
            
  = f.buttons do
    = f.commit_button
  - session_key_name = Rails.application.config.session_options[:key]
  = hidden_field_tag session_key_name, cookies[session_key_name], :id => 'session_key_name'
